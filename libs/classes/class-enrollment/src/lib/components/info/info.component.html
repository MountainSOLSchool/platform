<p-accordion *rxLet="viewModel$; let vm">
    <p-accordionTab header="Student" [selected]="true">
        <form>
            <div class="p-fluid">
                <div class="formgrid grid">
                    <div class="field col">
                        <span class="p-float-label">
                            <p-calendar
                                name="birthdate"
                                [showIcon]="true"
                                [solValid]="!vm.errors['birthdate']"
                                [(ngModel)]="vm.student.birthdate"
                                (ngModelChange)="updateStudentInfo(vm.student)"
                            ></p-calendar>
                            <label for="birthday">Birth Date</label>
                        </span>
                        <sol-messages
                            [messages]="vm.errors['birthdate']"
                        ></sol-messages>
                    </div>

                    <div class="field col">
                        <span class="p-float-label" width="20rem">
                            <input
                                name="age"
                                disabled
                                pInputText
                                [value]="vm.student.age"
                            />
                            <label for="birthday">Age</label>
                        </span>
                    </div>
                </div>

                <div class="formgrid grid">
                    <div class="field col">
                        <span class="p-float-label">
                            <input
                                required
                                type="text"
                                id="firstName"
                                name="firstName"
                                pInputText
                                [solValid]="!vm.errors['firstName']"
                                [(ngModel)]="vm.student.firstName"
                                (ngModelChange)="updateStudentInfo(vm.student)"
                                [ngModelOptions]="{ updateOn: 'blur' }"
                            />
                            <label for="firstName">First Name</label>
                        </span>
                        <sol-messages
                            [messages]="vm.errors['firstName']"
                        ></sol-messages>
                    </div>
                    <div class="field col">
                        <span class="p-float-label">
                            <input
                                required
                                type="text"
                                id="lastName"
                                name="lastName"
                                pInputText
                                [solValid]="!vm.errors['firstName']"
                                [(ngModel)]="vm.student.lastName"
                                (ngModelChange)="updateStudentInfo(vm.student)"
                                [ngModelOptions]="{ updateOn: 'blur' }"
                            />
                            <label for="lastName">Last Name</label>
                        </span>
                        <sol-messages
                            [messages]="vm.errors['lastName']"
                        ></sol-messages>
                    </div>
                </div>

                <div class="field" style="width: 49.35%">
                    <span class="p-float-label">
                        <input
                            required
                            type="text"
                            id="pronouns"
                            name="pronouns"
                            [solValid]="!vm.errors['pronouns']"
                            [(ngModel)]="vm.student.pronouns"
                            (ngModelChange)="updateStudentInfo(vm.student)"
                            pInputText
                        />
                        <label for="pronouns">Pronouns</label>
                    </span>
                    <sol-messages
                        [messages]="vm.errors['pronouns']"
                    ></sol-messages>
                </div>

                <div class="field" style="width: 49.35%; padding-top: 1%">
                    <span class="p-float-label">
                        <input
                            required
                            type="text"
                            id="school"
                            name="school"
                            pInputText
                            [solValid]="!vm.errors['school']"
                            [(ngModel)]="vm.student.school"
                            (ngModelChange)="updateStudentInfo(vm.student)"
                        />
                        <label for="school">School</label>
                    </span>
                    <sol-messages
                        [messages]="vm.errors['school']"
                    ></sol-messages>
                </div>

                <div style="padding-top: 1%">
                    <h3>Notes About Student</h3>
                    <p>
                        Is there anything you would like us to know about your
                        child? Likes/dislikes, change in family circumstances,
                        fears, etc.
                    </p>
                </div>

                <div id="notes" class="field" style="padding-top: 1%">
                    <span class="p-float-label">
                        <textarea
                            id="notes"
                            name="notes"
                            [rows]="5"
                            [cols]="50"
                            pInputTextarea
                            [(ngModel)]="vm.student.notes"
                            (ngModelChange)="updateStudentInfo(vm.student)"
                            [autoResize]="true"
                        ></textarea>
                        <label for="notes">Notes (Optional)</label><br /><br />
                    </span>
                </div>
            </div>
        </form>
    </p-accordionTab>

    <p-accordionTab header="Contact">
        <form>
            <div class="p-fluid">
                <div class="formgrid grid">
                    <div class="field col">
                        <span class="p-float-label">
                            <input
                                required
                                type="email"
                                id="email"
                                name="email"
                                pInputText
                                [solValid]="!vm.errors['contactEmail']"
                                [(ngModel)]="vm.student.contactEmail"
                                (ngModelChange)="updateStudentInfo(vm.student)"
                            />
                            <label for="email">Primary Email</label>
                        </span>
                        <sol-messages
                            [messages]="vm.errors['contactEmail']"
                        ></sol-messages>
                    </div>

                    <div class="field col">
                        <span class="p-float-label">
                            <input
                                type="email"
                                id="studentEmail"
                                name="studentEmail"
                                pInputText
                                [solValid]="!vm.errors['studentEmail']"
                                [(ngModel)]="vm.student.studentEmail"
                                (ngModelChange)="updateStudentInfo(vm.student)"
                            />
                            <label for="studentEmail"
                                >Student Email (Optional)</label
                            >
                        </span>
                        <sol-messages
                            [messages]="vm.errors['studentEmail']"
                        ></sol-messages>
                    </div>
                </div>

                <div class="formgrid grid">
                    <div class="field col">
                        <span class="p-float-label">
                            <p-inputMask
                                id="phone"
                                type="phone"
                                name="phone"
                                mask="999-999-9999"
                                [solValid]="!vm.errors['contactPhone']"
                                [(ngModel)]="vm.student.contactPhone"
                                (ngModelChange)="updateStudentInfo(vm.student)"
                            ></p-inputMask>
                            <label for="phone">Primary Phone Number</label>
                        </span>
                        <sol-messages
                            [messages]="vm.errors['contactPhone']"
                        ></sol-messages>
                    </div>

                    <div class="field col">
                        <span class="p-float-label">
                            <p-inputMask
                                type="studentPhone"
                                id="studentPhone"
                                name="studentPhone"
                                mask="999-999-9999"
                                [solValid]="!vm.errors['studentPhone']"
                                [(ngModel)]="vm.student.studentPhone"
                                (ngModelChange)="updateStudentInfo(vm.student)"
                            ></p-inputMask>
                            <label for="studentPhone"
                                >Student Phone (Optional)</label
                            >
                        </span>
                        <sol-messages
                            [messages]="vm.errors['studentPhone']"
                        ></sol-messages>
                    </div>
                </div>

                <div class="field" style="width: 49.35%">
                    <span class="p-float-label">
                        <input
                            type="text"
                            id="address"
                            name="address"
                            pInputText
                            [solValid]="!vm.errors['address']"
                            [(ngModel)]="vm.student.address"
                            (ngModelChange)="updateStudentInfo(vm.student)"
                        />
                        <label for="address">Street Address</label>
                    </span>
                    <sol-messages
                        [messages]="vm.errors['address']"
                    ></sol-messages>
                </div>
                <div class="field" style="width: 49.35%; padding-top: 1%">
                    <span class="p-float-label">
                        <input
                            type="text"
                            id="city"
                            name="city"
                            pInputText
                            [solValid]="!vm.errors['city']"
                            [(ngModel)]="vm.student.city"
                            (ngModelChange)="updateStudentInfo(vm.student)"
                        />
                        <label for="city">City</label>
                    </span>
                    <sol-messages [messages]="vm.errors['city']"></sol-messages>
                </div>
                <div class="grid-wrapper">
                    <div class="field area-quarter-left">
                        <span class="p-float-label">
                            <p-inputMask
                                id="state"
                                type="text"
                                name="state"
                                mask="aa"
                                slotChar=" "
                                [solValid]="!vm.errors['state']"
                                [(ngModel)]="vm.student.state"
                                (ngModelChange)="updateStudentInfo(vm.student)"
                            ></p-inputMask>
                            <label for="state">State</label>
                        </span>
                        <sol-messages
                            [messages]="vm.errors['state']"
                        ></sol-messages>
                    </div>
                    <div class="field area-quarter-left-center">
                        <span class="p-float-label">
                            <p-inputMask
                                id="zip"
                                type="text"
                                name="zip"
                                mask="99999"
                                slotChar=" "
                                [solValid]="!vm.errors['zip']"
                                [(ngModel)]="vm.student.zip"
                                (ngModelChange)="updateStudentInfo(vm.student)"
                            ></p-inputMask>
                            <label for="zip">Zip Code</label>
                        </span>
                        <sol-messages
                            [messages]="vm.errors['zip']"
                        ></sol-messages>
                    </div>
                </div>
            </div>
        </form>
    </p-accordionTab>
    <p-accordionTab header="Privacy and Chemicals">
        <h3>Chemicals</h3>
        <p>
            May Mountain SOL Staff apply these chemicals to your child,
            depending on outdoor conditions?
        </p>
        <div class="flexbox" style="width: 50%">
            <div class="field">
                <p-toggleButton
                    onLabel="Bug Spray OK"
                    offLabel="No Bug Spray"
                    onIcon="pi pi-check"
                    offIcon="pi pi-times"
                    [(ngModel)]="vm.student.naturalBugspray"
                    (ngModelChange)="updateStudentInfo(vm.student)"
                ></p-toggleButton>
            </div>
            <div class="field">
                <p-toggleButton
                    onLabel="DEET Bug Spray OK"
                    offLabel="No DEET Bug Spray"
                    onIcon="pi pi-check"
                    offIcon="pi pi-times"
                    [(ngModel)]="vm.student.deetBugspray"
                    (ngModelChange)="updateStudentInfo(vm.student)"
                ></p-toggleButton>
            </div>
            <div class="field">
                <p-toggleButton
                    onLabel="Sunscreen OK"
                    offLabel="No Sunscreen"
                    onIcon="pi pi-check"
                    offIcon="pi pi-times"
                    [(ngModel)]="vm.student.sunscreen"
                    (ngModelChange)="updateStudentInfo(vm.student)"
                ></p-toggleButton>
            </div>
        </div>

        <div id="Privacy" style="padding-bottom: 20px">
            <h3>Photos</h3>
            <p>Can we use photos of the student for promotional material?</p>
            <p-selectButton
                [options]="photographyPrivacyOptions"
                optionLabel="name"
                optionValue="value"
                [solValid]="!vm.errors['photography']"
                [(ngModel)]="vm.student.photography"
                (ngModelChange)="updateStudentInfo(vm.student)"
            ></p-selectButton>
            <sol-messages [messages]="vm.errors['photography']"></sol-messages>
        </div>
    </p-accordionTab>
    <p-accordionTab header="Parents and Guardians">
        <form>
            <div class="p-fluid">
                <h3>Parent/Guardian</h3>
                <ng-container
                    *ngFor="let guardian of vm.student.guardians; let i = index"
                >
                    <div class="formgrid grid">
                        <div
                            class="field col"
                            *rxLet="'guardian_' + i + '_name'; let validation"
                        >
                            <span class="p-float-label">
                                <input
                                    type="text"
                                    id="parentName"
                                    name="parentName"
                                    pInputText
                                    [solValid]="!vm.errors[validation]"
                                    [(ngModel)]="guardian.guardianName"
                                    (ngModelChange)="
                                        updateStudentInfo(vm.student)
                                    "
                                />
                                <label for="parentName">Name</label>
                            </span>
                            <sol-messages
                                [messages]="vm.errors[validation]"
                            ></sol-messages>
                        </div>
                        <div
                            class="field col"
                            *rxLet="
                                'guardian_' + i + '_relationship';
                                let validation
                            "
                        >
                            <span class="p-float-label">
                                <input
                                    type="text"
                                    id="parentRelationship"
                                    name="parentRelationship"
                                    pInputText
                                    [solValid]="!vm.errors[validation]"
                                    [(ngModel)]="guardian.guardianRelationship"
                                    (ngModelChange)="
                                        updateStudentInfo(vm.student)
                                    "
                                />
                                <label for="relationship"
                                    >Relationship to Student</label
                                >
                            </span>
                            <sol-messages
                                [messages]="vm.errors[validation]"
                            ></sol-messages>
                        </div>
                        <div
                            class="field col"
                            *rxLet="'guardian_' + i + '_phone'; let validation"
                        >
                            <span class="p-float-label">
                                <p-inputMask
                                    type="text"
                                    id="parentPhone"
                                    name="parentPhone"
                                    mask="999-999-9999"
                                    [solValid]="!vm.errors[validation]"
                                    [(ngModel)]="guardian.guardianPhone"
                                    (ngModelChange)="
                                        updateStudentInfo(vm.student)
                                    "
                                ></p-inputMask>
                                <label for="parentPhone">Phone Number</label>
                            </span>
                            <sol-messages
                                [messages]="vm.errors[validation]"
                            ></sol-messages>
                        </div>
                    </div>
                    <div
                        class="formgrid grid"
                        style="
                            border-bottom: 1px solid lightgray;
                            margin-bottom: 1rem;
                        "
                    >
                        <div
                            class="field col"
                            *rxLet="'guardian_' + i + '_email'; let validation"
                        >
                            <span class="p-float-label">
                                <input
                                    type="text"
                                    id="parentEmail"
                                    name="parentEmail"
                                    pInputText
                                    [solValid]="!vm.errors[validation]"
                                    [(ngModel)]="guardian.guardianEmail"
                                    (ngModelChange)="
                                        updateStudentInfo(vm.student)
                                    "
                                />
                                <label for="parentEmail">Email</label>
                            </span>
                            <sol-messages
                                [messages]="vm.errors[validation]"
                            ></sol-messages>
                        </div>
                        <div
                            class="field col"
                            *rxLet="
                                'guardian_' + i + '_residence';
                                let validation
                            "
                        >
                            <p-selectButton
                                [options]="guardianResidesWithStudentOptions"
                                optionLabel="name"
                                optionValue="value"
                                id="studentLivesWith"
                                name="studentLivesWith"
                                [solValid]="!vm.errors[validation]"
                                [(ngModel)]="
                                    guardian.guardianResidesWithStudent
                                "
                                (ngModelChange)="updateStudentInfo(vm.student)"
                            ></p-selectButton>
                            <sol-messages
                                [messages]="vm.errors[validation]"
                            ></sol-messages>
                        </div>
                    </div>
                </ng-container>

                <div style="width: 20%; padding-bottom: 20px">
                    <button
                        pButton
                        type="button"
                        label="Add Parent or Guardian"
                        class="p-button-outlined"
                        (click)="addGuardian()"
                    ></button>
                </div>
            </div>
        </form>
    </p-accordionTab>
    <p-accordionTab header="Pickup">
        <form>
            <div class="p-fluid">
                <p>
                    What code word should we ask for when picking up your child?
                </p>
                <div class="field" style="width: 49.35%; padding-bottom: 20px">
                    <span class="p-float-label">
                        <input
                            type="text"
                            id="codeWord"
                            name="codeWord"
                            pInputText
                        />
                        <label for="codeWord">Code Word</label>
                    </span>
                </div>

                <h3>Authorized For Student Pickup</h3>
                <p>
                    These include any people who may pick up your child. Usually
                    it includes the guardians from the previous section, and if
                    you would like you can add additional people who can pick up
                    your child.
                </p>

                <div class="formgrid grid">
                    <div class="field col">
                        <span class="p-float-label">
                            <input
                                type="text"
                                id="name"
                                name="name"
                                pInputText
                            />
                            <label for="name">Name</label>
                        </span>
                    </div>
                    <div class="field col">
                        <span class="p-float-label">
                            <input
                                type="text"
                                id="relationship"
                                name="relationship"
                                pInputText
                            />
                            <label for="relationship"
                                >Relationship to Student</label
                            >
                        </span>
                    </div>
                    <div class="field col">
                        <span class="p-float-label">
                            <p-inputMask
                                type="text"
                                id="pickupPhone"
                                name="pickupPhone"
                                mask="999-999-9999"
                            ></p-inputMask>
                            <label for="pickupPhone">Phone Number</label>
                        </span>
                    </div>
                </div>
                <div style="width: 20%; padding-bottom: 20px">
                    <button
                        pButton
                        type="button"
                        label="Add Authorized to Pickup"
                        class="p-button-outlined"
                    ></button>
                </div>
            </div>
        </form>
    </p-accordionTab>
</p-accordion>
