<h1>Class Forms and Contacts</h1>

<ng-template #suspense>
    <p-table [loading]="true">
        <ng-template pTemplate="header">
            <tr>
                <th pSortableColumn="title" style="width: 40%">
                    Name <p-sortIcon field="title"></p-sortIcon>
                </th>
                <th pSortableColumn="enrolledCount">
                    # Enrolled Students
                    <p-sortIcon field="enrolledCount"></p-sortIcon>
                </th>
                <th pSortableColumn="start">
                    Start
                    <p-sortIcon field="start"></p-sortIcon>
                </th>
                <th pSortableColumn="end">
                    End
                    <p-sortIcon field="end"></p-sortIcon>
                </th>
                <th style="width: 20%"></th>
                <th style="width: 15%"></th>
            </tr>
        </ng-template> </p-table
></ng-template>

<div *rxLet="viewModel$; let vm; suspense: suspense" style="margin-top: 20px">
    <p-table
        [value]="vm.classes ?? []"
        responsiveLayout="scroll"
        [loading]="!vm.classes"
        sortMode="single"
    >
        <ng-template pTemplate="header">
            <tr>
                <th pSortableColumn="title" style="width: 40%">
                    Name <p-sortIcon field="title"></p-sortIcon>
                </th>
                <th pSortableColumn="enrolledCount">
                    # Enrolled Students
                    <p-sortIcon field="enrolledCount"></p-sortIcon>
                </th>
                <th pSortableColumn="start">
                    Start
                    <p-sortIcon field="start"></p-sortIcon>
                </th>
                <th pSortableColumn="end">
                    End
                    <p-sortIcon field="end"></p-sortIcon>
                </th>
                <th style="width: 20%"></th>
                <th style="width: 15%"></th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-class>
            <tr>
                <td>{{ class.title }}</td>
                <td>{{ class.enrolledCount }}</td>
                <td>{{ class.start }}</td>
                <td>{{ class.end }}</td>
                <td>
                    <p-button
                        class="sol-button"
                        label="View/Print Class Forms"
                        icon="pi pi-download"
                        [id]="class.id + 'downloadBtn'"
                        [loading]="vm.isClassFormDownloadInProgress[class.id]"
                        (click)="downloadClick(class.id)"
                    >
                    </p-button>
                </td>
                <td>
                    <p-button
                        class="sol-button"
                        [id]="class.id + 'emailsBtn'"
                        label="Copy Email Lists"
                        [loading]="
                            vm.isClassSignInFormDownloadsInProgress[class.id]
                        "
                        (click)="copyEmailsClick(class)"
                    >
                    </p-button>
                </td>
            </tr>
        </ng-template>
    </p-table>
</div>
