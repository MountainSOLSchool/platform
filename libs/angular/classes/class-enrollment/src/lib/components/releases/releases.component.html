@let vm = viewModel$ | async;
@if (vm) {
    <p-accordion>
        <p-accordionTab [selected]="true">
            <ng-template pTemplate="header">
                @let valid = !vm.hasErrorsByGroup['healthRelease'];
                <div
                    [solValid]="valid"
                >
                    Medical Release and Permission to Treat
                    @if (!valid) {
                        ⚠️
                    }
                </div>
            </ng-template>
            <form>
                <div class="p-fluid">
                    <p>
                        My child is in good physical and mental health. I have
                        listed any special health considerations.
                    </p>
    
                    <p>
                        I acknowledge that acceptance of my child to the program
                        with my child's special health considerations is at the
                        discretion of Mountain SOL School. In case of emergency, I
                        understand that every effort will be made to contact parents
                        or guardians of children. In the event I cannot be reached
                        within a reasonable time, I grant permission to the
                        physician selected by Mountain SOL staff to hospitalize,
                        secure treatment for and to order injection, anesthesia or
                        surgery for the child as named herein.
                    </p>
                    <p>With my digital signature below, I hereby certify that this information is correct.</p>
                </div>
                <div style="width: 60%; margin-top: 2rem">
                    <span class="p-float-label">
                        <input
                            pInputText
                            id="medicalReleaseSignature"
                            name="medicalReleaseSignature"
                            [solValid]="!vm.errors['medicalReleaseSignature']"
                            [(ngModel)]="
                                vm.releaseSignatures.MEDICAL_RELEASE_FALL_2023
                                    .signature
                            "
                            (ngModelChange)="
                                updateReleaseSignatures(vm.releaseSignatures)
                            "
                        />
    
                        <label for="medicalReleaseSignature"
                            >Signature (type full name)</label
                        >
                    </span>
                    <sol-messages
                        [messages]="vm.errors['medicalReleaseSignature']"
                     variant="primeng"></sol-messages>
                </div>
            </form>
        </p-accordionTab>
        <p-accordionTab>
            <ng-template pTemplate="header">
                @let valid = !vm.hasErrorsByGroup['liabilityRelease'];
                <div
                    [solValid]="valid"
                >
                    Release of Liability and Hold Harmless
                    @if (!valid) {
                        ⚠️
                    }
                </div>
            </ng-template>
            <form>
                <div class="p-fluid">
                    <p>
                        I authorize my child to participate in the program and any
                        associated transportation services provided by Mountain SOL
                        School or its agents.
                    </p>
    
                    <p>
                        I acknowledge that I am the only one who can determine if I
                        or my child is physically fit enough or adequately skilled
                        enough to participate in the program.
                    </p>
    
                    <p>
                        I acknowledge the inherent risks that may result from by
                        child's participation in the program including falls,
                        fractures, contraction of infectious diseases, misbehavior
                        of other children, etc., all of which may result in injury
                        or death to my child or damage to his/her/our property. I
                        further acknowledge that Mountain SOL School is neither a
                        common carrier nor in the business of providing
                        transportation services to the public. I expressly assume
                        these risks and any associated costs, damages or losses,
                        including those caused by simple negligence of Mountain SOL
                        School, and waive and fully release all claims held by me,
                        my spouse/partner, my child or any of our estates from and
                        against Mountain SOL School and its agency partners,
                        officers, board members, agents, employees, volunteers and
                        representatives, arising from my child's attendance and
                        participation in the program and accept full responsibility
                        for the cost of all medical treatment to my child as a
                        result of any injuries caused by or through such other
                        risks. This waiver and release will apply to any and all
                        actions, causes, damages, claims or demands of any kind,
                        whether known or unknown, arising out of or otherwise
                        incidental to participation in the program.
                    </p>
    
                    <p>
                        I further agree, on behalf of myself and/or my child, to
                        indemnify, defend and hold harmless Mountain SOL School and
                        its agency partners, officers, board members, agents,
                        employees, volunteers and representatives from any injuries,
                        liabilities, claims, damages and expenses, including
                        attorney fees, incurred by Mountain SOL School, me, my child
                        or on behalf of my child, arising from my child's attendance
                        and participation in the program, with the exception of
                        gross negligence or reckless misconduct of Mountain SOL
                        School. While participating in the program, I and my child
                        will obey all rules, regulations and laws of the State of
                        West Virginia and the United States. I and my child will
                        further obey all rules, regulations and policies of Mountain
                        SOL School associated with the program.
                    </p>
    
                    <p>
                        I acknowledge that my or my child's failure to comply with
                        these rules, regulations, policies and laws may result in my
                        or my child's expulsion from the program. I agree that this
                        release will be governed by the laws of the State of West
                        Virginia. If any provision of this release is found to be
                        invalid or unenforceable, then the remainder of this release
                        will have full force and effect, and the invalid provision
                        will be modified, or partially enforced, to the maximum
                        extent permitted by West Virginia State law.
                    </p>
                    <p>
                        With my digital signature below, I hereby certify that this information is correct. I have
                        read all of the above terms and conditions, and I understand
                        and agree to be bound by them.
                    </p>
                </div>
    
                <div style="width: 60%; margin-top: 2rem">
                    <span class="p-float-label">
                        <input
                            pInputText
                            id="releaseOfLiabilitySignature"
                            name="releaseOfLiabilitySignature"
                            [solValid]="!vm.errors['releaseOfLiabilitySignature']"
                            [(ngModel)]="
                                vm.releaseSignatures.LIABILITY_RELEASE_FALL_2023
                                    .signature
                            "
                            (ngModelChange)="
                                updateReleaseSignatures(vm.releaseSignatures)
                            "
                        />
    
                        <label for="releaseOfLiabilitySignature"
                            >Signature (type full name)</label
                        >
                    </span>
                    <sol-messages
                        [messages]="vm.errors['releaseOfLiabilitySignature']"
                     variant="primeng"></sol-messages>
                </div>
            </form>
        </p-accordionTab>
    </p-accordion>
}
